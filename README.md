# appcardV2
基于乐鑫esp32的多功能应用卡片V2，天气时钟投屏等全都有，QQ技术群：801516857


20220101更新，
 //我的更改说明：V1.2程序，修改了烧录方式，不再需要使用麻烦的arduino分区了，直接一键烧写。
烧写见附件说明



20211209更新，增加了闹钟固件，具体见附件里面txt

 //我的更改说明：V1.1程序

//1,增加了闹钟,在配网里面，配网完成后需要上电前按下按键选择闹钟打开模式才能使用,默认响1分钟,响铃的时候长按按键可关闭。

 

注意烧写bin文件前，必须用arduino刷个空程序以便将分区信息刷进去后才能操作刷bin程序，这点esp32和esp8266完全不一样。

 

一，    硬件部分
1，pcb板打板使用“Gerber_PCB_appcardV2.zip”，也可，直接打板即可。
板子厚度1.6mm，无其他要求，因为3d外壳是根据这个设计的

2，元器件采购
直接按照原理图或者pcb图。

蜂鸣器高度需要注意，3d外壳预留了1.5mm，实际最终
蜂鸣器高度不能超过5.5mm。

另外使用的是esp32 wrover，不是wroom，二者封装不同。

3，    其他硬件材料
（1）    屏幕


插接款-不带触屏，st7789

需要触屏的自己开发，电路和程序需要修改的

（2）    螺丝
螺丝使用4个m2*10或者8个m1*5的，担心滑丝的，尽量买m1的螺丝


4，3d打印外壳

文件有4个，但是类型有3个

appcard-Body是底壳
appcard-Body001是盖板
appcard-btn002和appcard-btn003对应不同长度的按键，前面一个安装后多出来1mm，后面一个多出来2mm


3d打印方式尽量选择光固化，因为那几个1mm螺丝孔要求精度高，其他打印方式可能不够好。

 

5，焊接和装配说明
  焊接和装配可看b站视频
  焊接需要注意的有
A，插件引脚需要剪掉和pcb持平
B，光敏电阻是需要多出来一点，刚好在开槽那里弯折一下，然后伸出来一部分
 
C，Typec固定的4个脚尽量往外移动一些，这样方便typec座子里面的卡子卡住typec数据线
D，pcb的挨在一起的B和G是用于短接用的，可以不焊接插针。
   6个排针那里不用串口的话可以不焊接，需要用只焊接4个（3V3，G，RX，TX）就行，不论是插针还是排母都需要弯折一下
不然高度太高了，根本安装不上外壳了

 6，5v的typec供电部分电源，尽量选择低电流的充电器，1a或者2a的，不要使用太大电流的。

 

更多内容参看附件里面的PDF文档，附件限制了文件大小，彩屏投屏助手太大我放到网盘了。

 

 

网盘链接：https://pan.baidu.com/share/init?surl=oSA9dAb9utCoeQdWQqr4jA


提取码：9527

 

 

 

高清视频请查看：https://www.bilibili.com/video/BV1wg411w77z/

欢迎点赞和收藏


//我的更改说明：V1.0程序
//移植SD2代码到esp32，引脚需改变，引脚和分辨率需改变，主要更改Arduino\libraries\TFT_eSPI\User_Setup.h以及主程序appcard.ino中窗口大小
//底部空区域增加b站粉丝数，增加用于显示b站字符的中文字体，底部增加b站图标
//增加NVS读取，esp32和8266的wifi用户名和密码保存区不一样，8266直接保存在flash区不用额外处理，esp32保存在NVS区需要手动调用
//修改配网模式，改为web配网，配网页面中可输入城市代码和b站uid
//城市名称字体不全，替换全量字体
//增加自动亮度控制
//增加开机动画，目前3张，需要其他图片自行修改后编译
//预留闹钟功能，后续添加代码
//修改串口功能，去掉了城市代码设置(因为配网中已经有了)，新增常用亮度设置（自动亮度关闭时），最低亮度设置（自动亮度打开时），英语单词本轮播时间设置(分钟)
//断电情况下，按下按钮不松开，然后插上TYPE-C数据线通电，上电后大概等待1秒，屏幕上会有提示，提示停留在哪一个步骤，松开按钮就会进入该步骤，重启后生效
//按键控制功能有：
//1,自动亮度打开与关闭
//2,配网模式
//3,开机动画关闭
//4,开机动画设置为图片1（默认）
//5,开机动画设置为图片2
//6,开机动画设置为图片3
//7,底部动画设置为图片1（默认）
//8,底部动画设置为图片2
//9,页面选择1天气时钟（默认）
//10,页面选择2全屏数字时钟
//11,页面选择3圆盘时钟
//12,页面选择4投屏助手
//13,页面选择5英语单词本
//14,页面选择6喝水小助手
//15,页面选择7游戏flappy bird
//16,页面选择8系统信息
//17,页面选择9关于
//增加全屏数字时钟界面，按下按键可立即同步ntp时间
//增加圆盘时钟界面，按下按键可立即同步ntp时间
//增加投屏功能页面，需上位机配合
//增加英语单词本功能，支持轮播时间设置，按下按键可立即换单词和同步ntp时间,默认7990个单词。
//增加喝水小助手功能，默认8杯水，按一次增加一次，提示不同内容和显示进度，掉电不丢失，每天夜间1点10分清0重新计数。超过24次后，重启会清零。
//增加游戏flappy bird，按键操作，最高分保存记录掉电不丢失
